(this["webpackJsonpstock-app"]=this["webpackJsonpstock-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},29:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(14),l=a.n(r),c=(a(29),a(3));var s=function(e){let{handleDetailsClick:t,setShowModal:a}=e;const[r,l]=Object(o.useState)([]),[c,s]=Object(o.useState)([]),i=localStorage.getItem("userId");return Object(o.useEffect)(()=>{!async function(){if(i)try{const e=await fetch("https://mcsbt-capstone-sara.ew.r.appspot.com/portfolio/".concat(i));if(!e.ok)throw new Error("Failed to fetch");const t=await e.json();l(t)}catch(e){console.error("Error fetching portfolio data:",e)}}()},[i]),n.a.createElement("div",null,n.a.createElement("h2",null,"My Portfolio"),n.a.createElement("button",{onClick:()=>{localStorage.setItem("isLoggedIn","false"),localStorage.removeItem("userId"),window.location.href="/"}},"Logout"),n.a.createElement("input",{type:"text",placeholder:"Search Symbol",onChange:async e=>{const t=e.target.value;if(t){const e=await fetch("https://mcsbt-capstone-sara.ew.r.appspot.com/search/".concat(t)),a=await e.json();s(a.bestMatches)}}}),c&&c.length>0&&n.a.createElement("div",null,c.map((e,a)=>n.a.createElement("div",{key:a},"Symbol: ",e["1. symbol"],n.a.createElement("button",{onClick:()=>t(e["1. symbol"])},"View Details")))),r.length>0?n.a.createElement("ul",null,r.map((e,a)=>n.a.createElement("li",{key:a},"Symbol: ",e.symbol,", Quantity: ",e.quantity,n.a.createElement("button",{onClick:()=>t(e.symbol)},"View Details")))):n.a.createElement("p",null,"Your portfolio is empty."),n.a.createElement("button",{onClick:()=>a(!0)},"Add/Update Stocks"))};var i=function(e){let{onLogin:t}=e;const[a,r]=Object(o.useState)(""),[l,s]=Object(o.useState)(""),i=Object(c.p)();return n.a.createElement("div",null,n.a.createElement("h2",null,"Login"),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("https://mcsbt-capstone-sara.ew.r.appspot.com/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:a,password:l})}),o=await e.json();e.ok&&o.user_id?(t(!0),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userId",o.user_id),i("/portfolio")):alert("Login failed: "+(o.error||"Unknown error"))}catch(o){console.error("Error during login:",o),alert("Login failed: "+o.message)}}},n.a.createElement("div",null,n.a.createElement("label",null,"Username:"),n.a.createElement("input",{type:"text",value:a,onChange:e=>r(e.target.value),required:!0})),n.a.createElement("div",null,n.a.createElement("label",null,"Password:"),n.a.createElement("input",{type:"password",value:l,onChange:e=>s(e.target.value),required:!0})),n.a.createElement("button",{type:"submit"},"Login")))},u=a(36),m=a(37),p=a(38);var d=function(e){let{postStock:t,setShowModal:a,show:r,portfolio:l}=e;const[c,s]=Object(o.useState)(""),[i,d]=Object(o.useState)(""),[g,E]=Object(o.useState)(!1);return n.a.createElement(u.a,{show:r,onHide:()=>a(!1)},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,null,"Add or Update Stock")),n.a.createElement(m.a,{onSubmit:async e=>{e.preventDefault(),E(!0);const o={ticker:c.toUpperCase(),quantity:Number(i)};try{const e=await t(o);e.success?console.log("Stock successfully updated."):console.error("Failed to update the stock:",e.message)}catch(n){console.error("Error updating the stock:",n)}finally{E(!1),a(!1)}}},n.a.createElement(u.a.Body,null,n.a.createElement(m.a.Group,{className:"mb-3",controlId:"formBasicTicker"},n.a.createElement(m.a.Label,null,"Ticker Symbol"),n.a.createElement(m.a.Control,{type:"text",placeholder:"Enter ticker",value:c,onChange:e=>s(e.target.value),disabled:g,required:!0})),n.a.createElement(m.a.Group,{className:"mb-3",controlId:"formBasicQuantity"},n.a.createElement(m.a.Label,null,"Quantity"),n.a.createElement(m.a.Control,{type:"number",placeholder:"Enter quantity",value:i,onChange:e=>d(e.target.value),disabled:g,required:!0}))),n.a.createElement(u.a.Footer,null,n.a.createElement(p.a,{variant:"secondary",onClick:()=>a(!1),disabled:g},"Close"),n.a.createElement(p.a,{variant:"primary",type:"submit",disabled:g},g?"Submitting...":"Submit"))))};var g=function(){const[e,t]=Object(o.useState)("true"===localStorage.getItem("isLoggedIn")),[a,r]=Object(o.useState)(localStorage.getItem("userId")||""),[l,u]=Object(o.useState)([]),[m,p]=Object(o.useState)(!1),g="https://mcsbt-capstone-sara.ew.r.appspot.com/",E=Object(o.useCallback)(async()=>{if(a)try{const e=await fetch("".concat(g,"/portfolio/").concat(a));if(!e.ok)throw new Error("Failed to fetch");const t=await e.json();u(t)}catch(e){console.error("Error fetching data:",e)}},[a,g]);return Object(o.useEffect)(()=>{e&&E()},[e,a,E]),n.a.createElement("div",{className:"App"},n.a.createElement(c.d,null,n.a.createElement(c.b,{path:"/",element:e?n.a.createElement(c.a,{replace:!0,to:"/portfolio"}):n.a.createElement(i,{onLogin:async e=>{try{const a=await fetch("".concat(g,"/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Failed to login");const o=await a.json();"Login successful"===o.message?(t(!0),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userId",o.user_id),r(o.user_id),E()):console.error("Login failed:",o.error)}catch(a){console.error("Error during login:",a)}}})}),n.a.createElement(c.b,{path:"/portfolio",element:e?n.a.createElement(s,{data:l}):n.a.createElement(c.a,{replace:!0,to:"/"})})),e&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:()=>p(!0)},"Manage Stocks"),n.a.createElement("button",{onClick:()=>{t(!1),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userId"),r(""),u([])}},"Logout"),m&&n.a.createElement(d,{postStock:async e=>{try{const t=await fetch("https://mcsbt-capstone-sara.ew.r.appspot.com/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,userId:a})});if(!t.ok)throw new Error("Failed to post stock data");const o=await t.json();o.success?(p(!1),E()):console.error("Failed to post stock data:",o.message)}catch(t){console.error("Error posting stock data:",t)}},setShowModal:p})))};var E=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then(t=>{let{getCLS:a,getFID:o,getFCP:n,getLCP:r,getTTFB:l}=t;a(e),o(e),n(e),r(e),l(e)})},b=a(9);l.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(b.a,null,n.a.createElement(g,null)))),E()}},[[21,1,2]]]);
//# sourceMappingURL=main.6e6e2228.chunk.js.map